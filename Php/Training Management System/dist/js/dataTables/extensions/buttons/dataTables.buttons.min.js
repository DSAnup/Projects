/*! Buttons for DataTables 1.0.4-dev
 * Â©2015 SpryMedia Ltd - datatables.net/license
 */
!function(a,b,c){var d=function(d,e){"use strict";var f=0,g=0,h=e.ext.buttons,i=function(a,b){b===!0&&(b={}),d.isArray(b)&&(b={buttons:b}),this.c=d.extend(!0,{},i.defaults,b),b.buttons&&(this.c.buttons=b.buttons),this.s={dt:new e.Api(a),buttons:[],subButtons:[],listenKeys:"",namespace:"dtb"+f++},this.dom={container:d("<"+this.c.dom.container.tag+"/>").addClass(this.c.dom.container.className)},this._constructor()};d.extend(i.prototype,{action:function(a,b){var d=this._indexToButton(a).conf;return b===c?d.action:(d.action=b,this)},active:function(a,b){var d=this._indexToButton(a);return d.node.toggleClass(this.c.dom.button.active,b===c?!0:b),this},add:function(a,b){if("string"==typeof a&&-1!==a.indexOf("-")){var c=a.split("-");this.c.buttons[1*c[0]].buttons.splice(1*c[1],0,b)}else this.c.buttons.splice(1*a,0,b);return this.dom.container.empty(),this._buildButtons(this.c.buttons),this},container:function(){return this.dom.container},disable:function(a){var b=this._indexToButton(a);return b.node.addClass(this.c.dom.button.disabled),this},destroy:function(){d("body").off("keyup."+this.s.namespace);var a,b,c,e,f=this.s.buttons,g=this.s.subButtons;for(a=0,b=f.length;b>a;a++)for(this.removePrep(a),c=0,e=g[a].length;e>c;c++)this.removePrep(a+"-"+c);this.removeCommit(),this.dom.container.remove();var h=this.s.dt.settings()[0];for(a=0,b=h.length;b>a;a++)if(h.inst===this){h.splice(a,1);break}return this},enable:function(a,b){if(b===!1)return this.disable(a);var c=this._indexToButton(a);return c.node.removeClass(this.c.dom.button.disabled),this},name:function(){return this.c.name},node:function(a){var b=this._indexToButton(a);return b.node},removeCommit:function(){var a,b,c,d=this.s.buttons,e=this.s.subButtons;for(a=d.length-1;a>=0;a--)null===d[a]&&(d.splice(a,1),e.splice(a,1),this.c.buttons.splice(a,1));for(a=0,b=e.length;b>a;a++)for(c=e[a].length-1;c>=0;c--)null===e[a][c]&&(e[a].splice(c,1),this.c.buttons[a].buttons.splice(c,1));return this},removePrep:function(a){var b,c=this.s.dt;if("number"==typeof a||-1===a.indexOf("-"))b=this.s.buttons[1*a],b.conf.destroy&&b.conf.destroy.call(c.button(a),c,b,b.conf),b.node.remove(),this._removeKey(b.conf),this.s.buttons[1*a]=null;else{var d=a.split("-");b=this.s.subButtons[1*d[0]][1*d[1]],b.conf.destroy&&b.conf.destroy.call(c.button(a),c,b,b.conf),b.node.remove(),this._removeKey(b.conf),this.s.subButtons[1*d[0]][1*d[1]]=null}return this},text:function(a,b){var d=this._indexToButton(a),e=this.c.dom.buttonLiner.tag,f=this.s.dt,g=function(a){return"function"==typeof a?a(f,d.node,d.conf):a};return b===c?g(d.conf.text):(d.conf.text=b,e?d.node.children(e).html(g(b)):d.node.html(g(b)),this)},toIndex:function(a){var b,c,d,e,f=this.s.buttons,g=this.s.subButtons;for(b=0,c=f.length;c>b;b++)if(f[b].node[0]===a)return b+"";for(b=0,c=g.length;c>b;b++)for(d=0,e=g[b].length;e>d;d++)if(g[b][d].node[0]===a)return b+"-"+d},_constructor:function(){var a=this,c=this.s.dt,e=c.settings()[0];e._buttons||(e._buttons=[]),e._buttons.push({inst:this,name:this.c.name}),this._buildButtons(this.c.buttons),c.on("destroy",function(){a.destroy()}),d("body").on("keyup."+this.s.namespace,function(c){if(!b.activeElement||b.activeElement===b.body){var d=String.fromCharCode(c.keyCode).toLowerCase();-1!==a.s.listenKeys.toLowerCase().indexOf(d)&&a._keypress(d,c)}})},_addKey:function(a){a.key&&(this.s.listenKeys+=d.isPlainObject(a.key)?a.key.key:a.key)},_buildButtons:function(a,b,e){var f=this.s.dt;b||(b=this.dom.container,this.s.buttons=[],this.s.subButtons=[]);for(var g=0,h=a.length;h>g;g++){var i=this._resolveExtends(a[g]);if(i)if(d.isArray(i))this._buildButtons(i,b,e);else{var j=this._buildButton(i,e!==c?!0:!1);if(j){var k=j.node;if(b.append(j.inserter),e===c?(this.s.buttons.push({node:k,conf:i,inserter:j.inserter}),this.s.subButtons.push([])):this.s.subButtons[e].push({node:k,conf:i,inserter:j.inserter}),i.buttons){var l=this.c.dom.collection;i._collection=d("<"+l.tag+"/>").addClass(l.className),this._buildButtons(i.buttons,i._collection,g)}i.init&&i.init.call(f.button(k),f,k,i)}}}},_buildButton:function(a,b){var c=this.c.dom.button,e=this.c.dom.buttonLiner,f=this.c.dom.collection,h=this.s.dt,i=function(b){return"function"==typeof b?b(h,j,a):b};if(b&&f.button&&(c=f.button),b&&f.buttonLiner&&(e=f.buttonLiner),a.available&&!a.available(h,a))return!1;var j=d("<"+c.tag+"/>").addClass(c.className).attr("tabindex",this.s.dt.settings()[0].iTabIndex).attr("aria-controls",this.s.dt.table().node().id).on("click.dtb",function(b){b.preventDefault(),!j.hasClass(c.disabled)&&a.action&&a.action.call(h.button(j),b,h,j,a),j.blur()}).on("keyup.dtb",function(b){13===b.keyCode&&!j.hasClass(c.disabled)&&a.action&&a.action.call(h.button(j),b,h,j,a)});e.tag?j.append(d("<"+e.tag+"/>").html(i(a.text)).addClass(e.className)):j.html(i(a.text)),a.enabled===!1&&j.addClass(c.disabled),a.className&&j.addClass(a.className),a.namespace||(a.namespace=".dt-button-"+g++);var k,l=this.c.dom.buttonContainer;return k=l?d("<"+l.tag+"/>").addClass(l.className).append(j):j,this._addKey(a),{node:j,inserter:k}},_indexToButton:function(a){if("number"==typeof a||-1===a.indexOf("-"))return this.s.buttons[1*a];var b=a.split("-");return this.s.subButtons[1*b[0]][1*b[1]]},_keypress:function(a,b){var c,e,f,g,h=this.s.buttons,i=this.s.subButtons,j=function(c,e){if(c.key)if(c.key===a)e.click();else if(d.isPlainObject(c.key)){if(c.key.key!==a)return;if(c.key.shiftKey&&!b.shiftKey)return;if(c.key.altKey&&!b.altKey)return;if(c.key.ctrlKey&&!b.ctrlKey)return;if(c.key.metaKey&&!b.metaKey)return;e.click()}};for(c=0,e=h.length;e>c;c++)j(h[c].conf,h[c].node);for(c=0,e=i.length;e>c;c++)for(f=0,g=i[c].length;g>f;f++)j(i[c][f].conf,i[c][f].node)},_removeKey:function(a){if(a.key){var b=d.isPlainObject(a.key)?a.key.key:a.key,c=this.s.listenKeys.split(""),e=d.inArray(b,c);c.splice(e,1),this.s.listenKeys=c.join("")}},_resolveExtends:function(a){var b,e,f=this.s.dt,g=function(b){for(var e=0;!d.isPlainObject(b)&&!d.isArray(b);){if(b===c)return;if("function"==typeof b){if(b=b(f,a),!b)return!1}else if("string"==typeof b){if(!h[b])throw"Unknown button type: "+b;b=h[b]}if(e++,e>30)throw"Buttons: Too many iterations"}return d.isArray(b)?b:d.extend({},b)};for(a=g(a);a&&a.extend;){if(!h[a.extend])throw"Cannot extend unknown button type: "+a.extend;var i=g(h[a.extend]);if(d.isArray(i))return i;var j=i.className;a=d.extend({},i,a),j&&a.className!==j&&(a.className=j+" "+a.className);var k=a.postfixButtons;if(k){for(a.buttons||(a.buttons=[]),b=0,e=k.length;e>b;b++)a.buttons.push(k[b]);a.postfixButtons=null}var l=a.prefixButtons;if(l){for(a.buttons||(a.buttons=[]),b=0,e=l.length;e>b;b++)a.buttons.splice(b,0,l[b]);a.prefixButtons=null}a.extend=i.extend}return a}}),i.background=function(a,b,e){e===c&&(e=400),a?d("<div/>").addClass(b).css("display","none").appendTo("body").fadeIn(e):d("body > div."+b).fadeOut(e,function(){d(this).remove()})},i.instanceSelector=function(a,b){if(!a)return d.map(b,function(a){return a.inst});var c=[],e=d.map(b,function(a){return a.name}),f=function(a){if(d.isArray(a))for(var g=0,h=a.length;h>g;g++)f(a[g]);else if("string"==typeof a)if(-1!==a.indexOf(","))f(a.split(","));else{var i=d.inArray(d.trim(a),e);-1!==i&&c.push(b[i].inst)}else"number"==typeof a&&c.push(b[a].inst)};return f(a),c},i.buttonSelector=function(a,b){for(var e=[],f=function(a,b){var g,h,i=[];d.each(b.s.buttons,function(a,b){null!==b&&i.push({node:b.node[0],name:b.name})}),d.each(b.s.subButtons,function(a,b){d.each(b,function(a,b){null!==b&&i.push({node:b.node[0],name:b.name})})});var j=d.map(i,function(a){return a.node});if(d.isArray(a)||a instanceof d)for(g=0,h=a.length;h>g;g++)f(a[g],b);else if(null===a||a===c||"*"===a)for(g=0,h=i.length;h>g;g++)e.push({inst:b,idx:b.toIndex(i[g].node)});else if("number"==typeof a)e.push({inst:b,idx:a});else if("string"==typeof a)if(-1!==a.indexOf(",")){var k=a.split(",");for(g=0,h=k.length;h>g;g++)f(d.trim(k[g]),b)}else if(a.match(/^\d+(\-\d+)?$/))e.push({inst:b,idx:a});else if(-1!==a.indexOf(":name")){var l=a.replace(":name","");for(g=0,h=i.length;h>g;g++)i[g].name===l&&e.push({inst:b,idx:b.toIndex(i[g].node)})}else d(j).filter(a).each(function(){e.push({inst:b,idx:b.toIndex(this)})});else if("object"==typeof a&&a.nodeName){var m=d.inArray(a,j);-1!==m&&e.push({inst:b,idx:b.toIndex(j[m])})}},g=0,h=a.length;h>g;g++){var i=a[g];f(b,i)}return e},i.defaults={buttons:["copy","excel","csv","pdf","print"],name:"main",tabIndex:0,dom:{container:{tag:"div",className:"dt-buttons"},collection:{tag:"div",className:"dt-button-collection"},button:{tag:"a",className:"dt-button",active:"active",disabled:"disabled"},buttonLiner:{tag:"span",className:""}}},i.version="1.0.4-dev",d.extend(h,{collection:{text:function(a,b,c){return a.i18n("buttons.collection","Collection")},className:"buttons-collection",action:function(c,e,f,g){var h=f,j=h.offset(),k=d(e.table().container());if(g._collection.addClass(g.collectionLayout).css("display","none").appendTo("body").fadeIn(g.fade),"absolute"===g._collection.css("position")){g._collection.css({top:j.top+h.outerHeight(),left:j.left});var l=j.left+g._collection.outerWidth(),m=k.offset().left+k.width();l>m&&g._collection.css("left",j.left-(l-m))}else{var n=g._collection.height()/2;n>d(a).height()/2&&(n=d(a).height()/2),g._collection.css("marginTop",-1*n)}g.background&&i.background(!0,g.backgroundClassName,g.fade),setTimeout(function(){d(b).on("click.dtb-collection",function(a){d(a.target).parents().andSelf().filter(g._collection).length||(g._collection.fadeOut(g.fade,function(){g._collection.detach()}),i.background(!1,g.backgroundClassName,g.fade),d(b).off("click.dtb-collection"))})},10)},background:!0,collectionLayout:"",backgroundClassName:"dt-button-background",fade:400},copy:function(a,b){return b.preferHtml&&h.copyHtml5?"copyHtml5":h.copyFlash&&h.copyFlash.available(a,b)?"copyFlash":h.copyHtml5?"copyHtml5":void 0},csv:function(a,b){return h.csvHtml5&&h.csvHtml5.available(a,b)?"csvHtml5":h.csvFlash&&h.csvFlash.available(a,b)?"csvFlash":void 0},excel:function(a,b){return h.excelHtml5&&h.excelHtml5.available(a,b)?"excelHtml5":h.excelFlash&&h.excelFlash.available(a,b)?"excelFlash":void 0},pdf:function(a,b){return h.pdfHtml5&&h.pdfHtml5.available(a,b)?"pdfHtml5":h.pdfFlash&&h.pdfFlash.available(a,b)?"pdfFlash":void 0}}),e.Api.register("buttons()",function(a,b){return b===c&&(b=a,a=c),this.iterator(!0,"table",function(c){return c._buttons?i.buttonSelector(i.instanceSelector(a,c._buttons),b):void 0},!0)}),e.Api.register("button()",function(a,b){var c=this.buttons(a,b);return c.length>1&&c.splice(1,c.length),c}),e.Api.register(["buttons().active()","button().active()"],function(a){return this.each(function(b){b.inst.active(b.idx,a)})}),e.Api.registerPlural("buttons().action()","button().action()",function(a){return a===c?this.map(function(a){return a.inst.action(a.idx)}):this.each(function(b){b.inst.action(b.idx,a)})}),e.Api.register(["buttons().enable()","button().enable()"],function(a){return this.each(function(b){b.inst.enable(b.idx,a)})}),e.Api.register(["buttons().disable()","button().disable()"],function(){return this.each(function(a){a.inst.disable(a.idx)})}),e.Api.registerPlural("buttons().nodes()","button().node()",function(){var a=d();return d(this.each(function(b){a=a.add(b.inst.node(b.idx))})),a}),e.Api.registerPlural("buttons().text()","button().text()",function(a){return a===c?this.map(function(a){return a.inst.text(a.idx)}):this.each(function(b){b.inst.text(b.idx,a)})}),e.Api.registerPlural("buttons().trigger()","button().trigger()",function(){return this.each(function(a){a.inst.node(a.idx).trigger("click")})}),e.Api.registerPlural("buttons().containers()","buttons().container()",function(){var a=d();return d(this.each(function(b){a=a.add(b.inst.container())})),a}),e.Api.register("button().add()",function(a,b){return 1===this.length&&this[0].inst.add(a,b),this.button(a)}),e.Api.register("buttons().destroy()",function(a){return this.pluck("inst").unique().each(function(a){a.destroy()}),this}),e.Api.registerPlural("buttons().remove()","buttons().remove()",function(){return this.each(function(a){a.inst.removePrep(a.idx)}),this.pluck("inst").unique().each(function(a){a.removeCommit()}),this});var j;e.Api.register("buttons.info()",function(a,b,e){var f=this;return a===!1?(d("#datatables_buttons_info").fadeOut(function(){d(this).remove()}),clearTimeout(j),j=null,this):(j&&clearTimeout(j),d("#datatables_buttons_info").length&&d("#datatables_buttons_info").remove(),a=a?"<h2>"+a+"</h2>":"",d('<div id="datatables_buttons_info" class="dt-button-info"/>').html(a).append(d("<div/>")["string"==typeof b?"html":"append"](b)).css("display","none").appendTo("body").fadeIn(),e!==c&&0!==e&&(j=setTimeout(function(){f.buttons.info(!1)},e)),this)}),e.Api.register("buttons.exportData()",function(a){return this.context.length?k(new e.Api(this.context[0]),a):void 0});var k=function(a,b){for(var c=d.extend(!0,{},{rows:null,columns:"",modifier:{search:"applied",order:"applied"},orthogonal:"display",stripHtml:!0,stripNewlines:!0,trim:!0},b),e=function(a){return"string"!=typeof a?a:(c.stripHtml&&(a=a.replace(/<.*?>/g,"")),c.trim&&(a=a.replace(/^\s+|\s+$/g,"")),c.stripNewlines&&(a=a.replace(/\n/g," ")),a)},f=a.columns(c.columns).indexes().map(function(b,c){return e(a.column(b).header().innerHTML)}).toArray(),g=a.table().footer()?a.columns(c.columns).indexes().map(function(b,c){var d=a.column(b).footer();return d?e(d.innerHTML):""}).toArray():null,h=a.rows(c.rows,c.modifier).indexes().toArray(),i=a.cells(h,c.columns).render(c.orthogonal).toArray(),j=f.length,k=j>0?i.length/j:0,l=new Array(k),m=0,n=0,o=k;o>n;n++){for(var p=new Array(j),q=0;j>q;q++)p[q]=e(i[m]),m++;l[n]=p}return{header:f,footer:g,body:l}};return d.fn.dataTable.Buttons=i,d.fn.DataTable.Buttons=i,d(b).on("init.dt.dtb",function(a,b,c){if("dt"===a.namespace){var d=b.oInit.buttons||e.defaults.buttons;d&&!b._buttons&&new i(b,d).container()}}),e.ext.feature.push({fnInit:function(a){var b=new e.Api(a),c=b.init().buttons;return new i(b,c).container()},cFeature:"B"}),i};"function"==typeof define&&define.amd?define(["jquery","datatables"],d):"object"==typeof exports?d(require("jquery"),require("datatables")):jQuery&&!jQuery.fn.dataTable.Buttons&&d(jQuery,jQuery.fn.dataTable)}(window,document);