/*! Select for DataTables 1.0.1
 * 2015 SpryMedia Ltd - datatables.net/license/mit
 */
!function(a,b,c){var d=function(a,d){"use strict";function e(a,b,c){var d,e,f,g=function(b,c){if(b>c){var d=c;c=b,b=d}var e=!1;return a.columns(":visible").indexes().filter(function(a){return a===b&&(e=!0),a===c?(e=!1,!0):e})},h=function(b,c){var d=a.rows({search:"applied"}).indexes();if(d.indexOf(b)>d.indexOf(c)){var e=c;c=b,b=e}var f=!1;return d.filter(function(a){return a===b&&(f=!0),a===c?(f=!1,!0):f})};a.cells({selected:!0}).any()||c?(e=g(c.column,b.column),f=h(c.row,b.row)):(e=g(0,b.column),f=h(0,b.row)),d=a.cells(f,e).flatten(),a.cells(b,{selected:!0}).any()?a.cells(d).deselect():a.cells(d).select()}function f(b){var c=b.settings()[0],d=c._select.selector;a(b.table().body()).off("mousedown.dtSelect",d).off("mouseup.dtSelect",d).off("click.dtSelect",d),a("body").off("click.dtSelect")}function g(b){var c=a(b.table().body()),d=b.settings()[0],e=d._select.selector;c.on("mousedown.dtSelect",e,function(a){a.shiftKey&&c.css("-moz-user-select","none").one("selectstart.dtSelect",e,function(){return!1})}).on("mouseup.dtSelect",e,function(a){c.css("-moz-user-select","")}).on("click.dtSelect",e,function(d){var e,f=b.select.items(),g=b.cell(this).index(),h=b.settings()[0];a(d.target).closest("tbody")[0]==c[0]&&b.cell(d.target).any()&&("row"===f?(e=g.row,m(d,b,h,"row",e)):"column"===f?(e=b.cell(d.target).index().column,m(d,b,h,"column",e)):"cell"===f&&(e=b.cell(d.target).index(),m(d,b,h,"cell",e)),h._select_lastCell=g)}),a("body").on("click.dtSelect",function(c){if(d._select.blurable){if(a(c.target).parents().filter(b.table().container()).length)return;if(a(c.target).parents("div.DTE").length)return;l(d,!0)}})}function h(b,c,d,e){(!e||b.flatten().length)&&(d.unshift(b),a(b.table().node()).triggerHandler(c+".dt",d))}function i(b){var c=b.settings()[0];if(c._select.info&&c.aanFeatures.i){var d=a('<span class="select-info"/>'),e=function(c,e){d.append(a('<span class="select-item"/>').append(b.i18n("select."+c+"s",{_:"%d "+c+"s selected",0:"",1:"1 "+c+" selected"},e)))};e("row",b.rows({selected:!0}).flatten().length),e("column",b.columns({selected:!0}).flatten().length),e("cell",b.cells({selected:!0}).flatten().length),a.each(c.aanFeatures.i,function(b,c){c=a(c);var e=c.children("span.select-info");e.length&&e.remove(),""!==d.text()&&c.append(d)})}}function j(b){var e=new d.Api(b);b.aoRowCreatedCallback.push({fn:function(c,d,e){var f,g,h=b.aoData[e];for(h._select_selected&&a(c).addClass("selected"),f=0,g=b.aoColumns.length;g>f;f++)(b.aoColumns[f]._select_selected||h._selected_cells&&h._selected_cells[f])&&a(h.anCells[f]).addClass("selected")},sName:"select-deferRender"}),e.on("preXhr.dt.dtSelect",function(){var a=e.rows({selected:!0}).ids(!0).filter(function(a){return a!==c}),b=e.cells({selected:!0}).eq(0).map(function(a){var b=e.row(a.row).id(!0);return b?{row:b,column:a.column}:c}).filter(function(a){return a!==c});e.one("draw.dt.dtSelect",function(){e.rows(a).select(),b.any()&&b.each(function(a){e.cells(a.row,a.column).select()})})}),e.on("draw.dtSelect.dt select.dtSelect.dt deselect.dtSelect.dt",function(){i(e)}),e.on("destroy.dtSelect",function(){f(e),e.off(".dtSelect")})}function k(b,c,d,e){var f=b[c+"s"]({search:"applied"}).indexes(),g=a.inArray(e,f),h=a.inArray(d,f);if(b[c+"s"]({selected:!0}).any()||-1!==g){if(g>h){var i=h;h=g,g=i}f.splice(h+1,f.length),f.splice(0,g)}else f.splice(a.inArray(d,f)+1,f.length);b[c](d,{selected:!0}).any()?(f.splice(a.inArray(d,f),1),b[c+"s"](f).deselect()):b[c+"s"](f).select()}function l(a,b){if(b||"single"===a._select.style){var c=new d.Api(a);c.rows({selected:!0}).deselect(),c.columns({selected:!0}).deselect(),c.cells({selected:!0}).deselect()}}function m(a,b,c,d,f){var g=b.select.style(),h=b[d](f,{selected:!0}).any();if("os"===g)if(a.ctrlKey||a.metaKey)b[d](f).select(!h);else if(a.shiftKey)"cell"===d?e(b,f,c._select_lastCell||null):k(b,d,f,c._select_lastCell?c._select_lastCell[d]:null);else{var i=b[d+"s"]({selected:!0});h&&1===i.flatten().length?b[d](f).deselect():(i.deselect(),b[d](f).select())}else b[d](f).select(!h)}function n(a,b){return function(c){return c.i18n("buttons."+a,b)}}d.select={},d.select.version="1.0.1",a.each([{type:"row",prop:"aoData"},{type:"column",prop:"aoColumns"}],function(a,b){d.ext.selector[b.type].push(function(a,d,e){var f,g=d.selected,h=[];if(g===c)return e;for(var i=0,j=e.length;j>i;i++)f=a[b.prop][e[i]],(g===!0&&f._select_selected===!0||g===!1&&!f._select_selected)&&h.push(e[i]);return h})}),d.ext.selector.cell.push(function(a,b,d){var e,f=b.selected,g=[];if(f===c)return d;for(var h=0,i=d.length;i>h;h++)e=a.aoData[d[h].row],(f===!0&&e._selected_cells&&e._selected_cells[d[h].column]===!0||f===!1&&(!e._selected_cells||!e._selected_cells[d[h].column]))&&g.push(d[h]);return g});var o=d.Api.register,p=d.Api.registerPlural;o("select()",function(){}),o("select.blurable()",function(a){return a===c?this.context[0]._select.blurable:this.iterator("table",function(b){b._select.blurable=a})}),o("select.info()",function(a){return i===c?this.context[0]._select.info:this.iterator("table",function(b){b._select.info=a})}),o("select.items()",function(a){return a===c?this.context[0]._select.items:this.iterator("table",function(b){b._select.items=a,h(new d.Api(b),"selectItems",[a])})}),o("select.style()",function(a){return a===c?this.context[0]._select.style:this.iterator("table",function(b){b._select.style=a,b._select_init||j(b);var c=new d.Api(b);f(c),"api"!==a&&g(c),h(new d.Api(b),"selectStyle",[a])})}),o("select.selector()",function(a){return a===c?this.context[0]._select.selector:this.iterator("table",function(b){f(new d.Api(b)),b._select.selector=a,"api"!==b._select.style&&g(new d.Api(b))})}),p("rows().select()","row().select()",function(b){var c=this;return b===!1?this.deselect():(this.iterator("row",function(b,c){l(b),b.aoData[c]._select_selected=!0,a(b.aoData[c].nTr).addClass("selected")}),this.iterator("table",function(a,b){h(c,"select",["row",c[b]],!0)}),this)}),p("columns().select()","column().select()",function(b){var c=this;return b===!1?this.deselect():(this.iterator("column",function(b,c){l(b),b.aoColumns[c]._select_selected=!0;var e=new d.Api(b).column(c);a(e.header()).addClass("selected"),a(e.footer()).addClass("selected"),e.nodes().to$().addClass("selected")}),this.iterator("table",function(a,b){h(c,"select",["column",c[b]],!0)}),this)}),p("cells().select()","cell().select()",function(b){var d=this;return b===!1?this.deselect():(this.iterator("cell",function(b,d,e){l(b);var f=b.aoData[d];f._selected_cells===c&&(f._selected_cells=[]),f._selected_cells[e]=!0,f.anCells&&a(f.anCells[e]).addClass("selected")}),this.iterator("table",function(a,b){h(d,"select",["cell",d[b]],!0)}),this)}),p("rows().deselect()","row().deselect()",function(){var b=this;return this.iterator("row",function(b,c){b.aoData[c]._select_selected=!1,a(b.aoData[c].nTr).removeClass("selected")}),this.iterator("table",function(a,c){h(b,"deselect",["row",b[c]],!0)}),this}),p("columns().deselect()","column().deselect()",function(){var b=this;return this.iterator("column",function(b,c){b.aoColumns[c]._select_selected=!1;var e=new d.Api(b),f=e.column(c);a(f.header()).removeClass("selected"),a(f.footer()).removeClass("selected"),e.cells(null,c).indexes().each(function(c){var d=b.aoData[c.row],e=d._selected_cells;!d.anCells||e&&e[c.column]||a(d.anCells[c.column]).removeClass("selected")})}),this.iterator("table",function(a,c){h(b,"deselect",["column",b[c]],!0)}),this}),p("cells().deselect()","cell().deselect()",function(){var b=this;return this.iterator("cell",function(b,c,d){var e=b.aoData[c];e._selected_cells[d]=!1,e.anCells&&!b.aoColumns[d]._select_selected&&a(e.anCells[d]).removeClass("selected")}),this.iterator("table",function(a,c){h(b,"deselect",["cell",b[c]],!0)}),this}),a.extend(d.ext.buttons,{selected:{text:n("selected","Selected"),className:"buttons-selected",init:function(a,b,c){var d=this;a.on("draw.dt.DT select.dt.DT deselect.dt.DT",function(){var a=d.rows({selected:!0}).any()||d.columns({selected:!0}).any()||d.cells({selected:!0}).any();d.enable(a)}),this.disable()}},selectedSingle:{text:n("selectedSingle","Selected single"),className:"buttons-selected-single",init:function(a,b,c){var d=this;a.on("draw.dt.DT select.dt.DT deselect.dt.DT",function(){var b=a.rows({selected:!0}).flatten().length+a.columns({selected:!0}).flatten().length+a.cells({selected:!0}).flatten().length;d.enable(1===b)}),this.disable()}},selectAll:{text:n("selectAll","Select all"),className:"buttons-select-all",action:function(){var a=this.select.items();this[a+"s"]().select()}},selectNone:{text:n("selectNone","Deselect all"),className:"buttons-select-none",action:function(){l(this.settings()[0],!0)}}}),a.each(["Row","Column","Cell"],function(a,b){var c=b.toLowerCase();d.ext.buttons["select"+b+"s"]={text:n("select"+b+"s","Select "+c+"s"),className:"buttons-select-"+c+"s",action:function(){this.select.items(c)},init:function(a,b,d){var e=this;a.on("selectItems.dt.DT",function(a,b,d){e.active(d===c)})}}}),a(b).on("init.dt.dtSelect",function(b,e,f){if("dt"===b.namespace){var g=e.oInit.select||d.defaults.select,h=new d.Api(e),i="row",j="api",k=!1,l=!0,m="td, th";e._select={},g===!0?j="os":"string"==typeof g?j=g:a.isPlainObject(g)&&(g.blurable!==c&&(k=g.blurable),g.info!==c&&(l=g.info),g.items!==c&&(i=g.items),g.style!==c&&(j=g.style),g.selector!==c&&(m=g.selector)),h.select.selector(m),h.select.items(i),h.select.style(j),h.select.blurable(k),h.select.info(l),a(h.table().node()).hasClass("selectable")&&h.select.style("os")}})};"function"==typeof define&&define.amd?define(["jquery","datatables"],d):"object"==typeof exports?d(require("jquery"),require("datatables")):jQuery&&!jQuery.fn.dataTable.select&&d(jQuery,jQuery.fn.dataTable)}(window,document);